@using eShop.WebAppComponents.Item
@using System

@inject IProductImageUrlProvider ProductImages

<div class="catalog-item">
    <a class="catalog-product" href="@ItemHelper.Url(Item)" data-enhance-nav="false">
        <span class='catalog-product-image'>
            <img alt="@Item.Name" src='@ProductImages.GetProductImageUrl(Item)' />
        </span>
        <span class='catalog-product-content'>
            <span class='name'>@Item.Name</span>
            <span class='price'>$@Item.Price.ToString("0.00")</span>
            <span class='rating'>@Rating</span>
        </span>
    </a>
</div>

@code {
    [Parameter, EditorRequired]
    public required CatalogItem Item { get; set; }

    [Parameter]
    public bool IsLoggedIn { get; set; }

    public string Rating = "☆☆★";

    protected override void OnInitialized()
    {
        Random random = new Random();
        int r = random.Next(0, 4);

        string fullStar = "★";
        string emptyStar = "☆";

        string result;
        if(r == 0) {
            result = emptyStar + emptyStar + emptyStar;
        } else if (r == 1) {
            result = emptyStar + emptyStar + fullStar;
        } else if (r == 2) {
            result = emptyStar + fullStar + fullStar;
        } else if (r == 3) {
            result = fullStar + fullStar + fullStar;
        } else {
            result = emptyStar + emptyStar + emptyStar;
        }
        Rating = result;
    }
}
